<% if authenticated? %>
  <%= form_with url: product_wishlist_path(product), class: "space-y-4 w-full max-w-sm" do |form| %>

    <% if Current.user.wishlists.any? %>
      <div>
        <label for="wishlist_id" class="block text-sm font-medium text-gray-100 mb-1">
          Select Wishlist
        </label>
        <%= form.collection_select :wishlist_id,
                                   Current.user.wishlists,
                                   :id, :name,
                                   { prompt: "Choose a wishlist" },
                                   class: "w-full bg-gray-800 text-white border border-gray-700 rounded-lg p-2
                                           focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors" %>
      </div>
    <% else %>
      <p class="text-sm text-gray-200">
        You don't have any wishlists yet. <%= link_to "Create one", new_wishlist_path, class: "text-pink-500 hover:text-pink-600 underline" %>.
      </p>
    <% end %>

    <div>
      <%= form.submit "Add to Wishlist",
        class: "w-full bg-pink-600 text-white font-medium px-4 py-2 rounded-lg
                hover:bg-pink-700 transition-colors focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2" %>
    </div>

  <% end %>

<% else %>
  <%= link_to "Add to wishlist",
      sign_up_path,
      class: "inline-block text-pink-500 font-medium hover:text-pink-600 underline" %>
<% end %>
